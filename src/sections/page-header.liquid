{% for block in section.blocks %}
  {%- if page.handle == block.settings.page -%}
    <div class="page-header__box">
      {% if block.settings.title != blank %}
        {% if page.content contains "<h1" %}
          <h2>{{ block.settings.title }}</h2>
        {% else %}
          <h1>{{ block.settings.title }}</h1>
        {% endif %}
      {% else %}
        {% if page.content contains "<h1" %}
          <h2>{{ page.title }}</h2>
        {% else %}
          <h1>{{ page.title }}</h1>
        {% endif %}
      {% endif %}

      {% if block.settings.subtitle != blank %}
        <p>{{ block.settings.subtitle }}</p>
      {% endif %}
    </div>
  {% endif %}
{% endfor %}

{% schema %}
  {
    "name": "Page Header",
    "class": "page-header",
    "blocks": [
      {
        "type": "Page",
        "name": "Page",
        "settings": [
          {
            "type": "page",
            "id": "page",
            "label": "Page",
            "info": "On which page will the selected header appear?"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "info": "Optional, defaults to page title."
          },
          {
            "type": "textarea",
            "id": "subtitle",
            "label": "Subtitle/ description"
          }
        ]
      }
    ]
  }
{% endschema %}