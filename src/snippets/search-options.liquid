<script type="application/ld+json" data-search-options>
  {% assign type = "" %}
  {% if settings.search_q_products %}
    {% assign type = type | append: "product" %}
  {% endif %}
  {% if settings.search_q_page %}
    {% if type != blank %}
      {% assign type = type | append: ",page" %}
    {% else %}
      {% assign type = type | append: "page" %}
    {% endif %}
  {% endif %}
  {% if settings.search_q_collection %}
    {% if type != blank %}
      {% assign type = type | append: ",collection" %}
    {% else %}
      {% assign type = type | append: "collection" %}
    {% endif %}
  {% endif %}
  {% if settings.search_q_article %}
    {% if type != blank %}
      {% assign type = type | append: ",article" %}
    {% else %}
      {% assign type = type | append: "article" %}
    {% endif %}
  {% endif %}
  {% assign limit = settings.search_limit %}
  {% assign fields = "" %}
  {% if settings.search_field_author %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",author" %}
    {% else %}
      {% assign fields = fields | append: "author" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_body %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",body" %}
    {% else %}
      {% assign fields = fields | append: "body" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_product_type %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",product_type" %}
    {% else %}
      {% assign fields = fields | append: "product_type" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_tag %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",tag" %}
    {% else %}
      {% assign fields = fields | append: "tag" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_title %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",title" %}
    {% else %}
      {% assign fields = fields | append: "title" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_barcode %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",variants.barcode" %}
    {% else %}
      {% assign fields = fields | append: "variants.barcode" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_sku %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",variants.sku" %}
    {% else %}
      {% assign fields = fields | append: "variants.sku" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_variant_title %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",variants.title" %}
    {% else %}
      {% assign fields = fields | append: "variants.title" %}
    {% endif %}
  {% endif %}
  {% if settings.search_field_vendor %}
    {% if fields != blank %}
      {% assign fields = fields | append: ",vendor" %}
    {% else %}
      {% assign fields = fields | append: "vendor" %}
    {% endif %}
  {% endif %}
  {
    "type": {{ type | json }},
    "limit": {{ limit | json }},
    "options": {
      "unavailable_products": {{ settings.search_unavailable | json }},
      "fields": {{ fields | json }}
    }
  }
</script>
